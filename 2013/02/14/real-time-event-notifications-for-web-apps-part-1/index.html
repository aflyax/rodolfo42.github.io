
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Real time event notifications for web apps - Part 1 - Rodolfo Ferreira</title>
	<meta name="author" content="Rodolfo Ferreira">

	
	<meta name="description" content="Real Time Event Notifications for Web Apps - Part 1 Overview I thought I would share an interesting solution I came up with for notifying active &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Rodolfo Ferreira" type="application/atom+xml">
	
	<link rel="canonical" href="http://rodolfoferreira.com.br/2013/02/14/real-time-event-notifications-for-web-apps-part-1/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script type="text/javascript" src="/javascripts/jquery.githubRepoWidget.min.js"></script>
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("rodolfo@rodolfoferreira.com.br") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
</div>
<h1><a href="/">Rodolfo Ferreira</a></h1>
<p class="subtitle">Calmer than you are</p>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/about.html">About me</a></li>
</ul>
<p class="bio">
  Web developer, open-source enthusiast. Loves building stuff that works. Big jazz/fusion and progressive music fan.
</p></nav>
<nav id="sub-nav">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/116065547582875783280" rel="author" title="Google+">Google+</a>
		
		
		
		<a class="github" href="https://github.com/rodolfo42" title="GitHub">GitHub</a>
		
		
		<a class="coderwall" href="https://coderwall.com/rodolfo42" title="Coderwall">Coderwall</a>
		
		
		<a class="stackoverflow" href="https://stackoverflow.com/2353377" title="StackOverflow">StackOverflow</a>
		
		
		<a class="linkedin" href="http://www.linkedin.com/in/rodolfo42" title="LinkedIn">LinkedIn</a>
		
		
		<a class="pinterest" href="https://pinterest.com/rodolfoferreira" title="Pinterest">Pinterest</a>
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Real Time Event Notifications for Web Apps - Part 1</h1>
	<div class="entry-content" itemprop="articleBody"><h2>Overview</h2>

<p>I thought I would share an interesting solution I came up with for notifying active users of a web application about system events in real time.
I&#8217;ll just use the following scenario:</p>

<blockquote><p>an e-commerce app which needs to notify <strong>active</strong> back-office administrators in the instant when an order has been placed or when an order&#8217;s items have just been successfully delivered to their destination.</p></blockquote>

<p>Note the emphasis on <strong>active</strong> - what I mean is: currently logged in and active users, with at least one tab open in any page of the app. An on-screen, desktop notification is appropriate, and with Chromium&#8217;s <a href="http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification" title="Chromium Desktop Notification Spec">Desktop Notifications API</a> it&#8217;s not only possible to notify the user when the tab is active, but even when it&#8217;s not (and even when the whole browser itself is minimized).</p>

<p>Of course you could have e-mail alerts, but that could end up cluttering every inbox with unnecessary and outdated alerts, once the order could have already been acted upon long before these alerts would be checked.</p>

<!--more-->


<h2>Architecture</h2>

<p>So in order to make it <em>actually</em> real time, the idea is to have an <em>event server</em> which is responsible for only two things:</p>

<ul>
<li>keeping a list of active listeners for events (subscribers)</li>
<li>react upon receiving event data from the app (publisher), by pushing it to all active listeners, using a common data interchange format</li>
</ul>


<p>Basically, an implementation of the old <a href="http://c2.com/cgi/wiki?PublishSubscribeModel" title="C2 Wiki on Pub/Sub Model">Publish-Subscribe model</a>. The app doesn&#8217;t care if there are any subscribers for the event, and the subscribers don&#8217;t care if there are any publishers. To illustrate:</p>

<p><img src="/uploads/arch1.png" alt="Diagram describing the relations between the app, event server and the browser clients" /></p>

<p>Pretty straightforward.</p>

<p>The communication between the app and the server has an important attribute: the server doesn&#8217;t wait until it has finished notifying all the subscribers, in order to send a response back to the app. It&#8217;s <strong>asynchronous</strong>, meaning you could have 1000&#8217;s of clients connected, and still the event server would respond quickly to the app. Non-blocking communication like that it&#8217;s what makes it able to handle high ammounts of traffic.</p>

<p>The event server&#8217;s response to the app would only indicate that the server received the event data successfully. Whether it has tons of clients to notify or none, the app will still get the same response time, allowing it to scale well. I have found that this approach also decreases coupling and thus becomes much more modular and mantainable.</p>

<p>In the <a href="/2013/02/20/real-time-event-notifications-for-web-apps-part-2/">second part</a> of this post, I will share the actual code I wrote for this solution and the technologies and languages used.</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
  
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2013 - Rodolfo Ferreira -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> and <a href="http://pages.github.com">GitHub Pages</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'rferreirablog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rodolfoferreira.com.br/2013/02/14/real-time-event-notifications-for-web-apps-part-1/';
        var disqus_url = 'http://rodolfoferreira.com.br/2013/02/14/real-time-event-notifications-for-web-apps-part-1/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-38414082-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




		</div>
	</div>
</body>
</html>
